# Franka_Robot

This repository contains the implementation and results of my Masterâ€™s thesis. 

## Aim
1. To analyze the performance of **NVIDIA cuMotion** motion planning algorithms.
2. To integrate **NVIDIA Isaac Sim** (a physics-based simulation platform) with **ROS2** (a robotics middleware framework).

---

## Background

**cuMotion (or cuRobo)** is a CUDA-accelerated library developed by NVIDIA. It provides a suite of robotics algorithms that leverage parallel computation to improve performance.

The project uses **Isaac Sim** as a simulation platform to manipulate the **Franka Panda** robot via the **ROS2 middleware**. The **Isaac Sim** environment is configured with the **ROS2 bridge package** through the `omni.isaac.ros2_bridge` extension. Within this environment:
- An **Action Graph**  facilitates communication with ROS2.
- **Action Graph construction** is visualized in Figure below.

  
![Figure 1: Action Graph Construction](<images/Action_Graph_Panda.png>)

Two robots are utilized in the project:
1. **Franka Panda** for manipulation tasks.
2. **Idealworks iw.hub** robot as a mobile platform.

   
![Figure 2: Mobile Manipulator](<images/Franka_Mobile_manipulator.png>)

---

## Scenarios

The project evaluates the performance of the **cuMotion** pipeline against the **OMPL's RRTConnectkConfigDefault** pipeline in three scenarios. Each scenario involves the robot moving from a collision-free initial state(IS) to intermediate(IT) and final target(FT) states.

### 1. Narrow Tunnel
- **Setup**: Targets are placed on either side of a narrow tunnel.
- **Objective**: The robot can either navigate from **IS** through the tunnel or avoid it to reach the **IT** and **FT** pose.
  
![Figure 1: Mobile Manipulator in Narrow Tunnel Scene](<images/Narrow Tunnel.PNG>)
### 2. Library Scene
- **Setup**: A scene with a bookshelf and a table, with the robot positioned between them.
- **Objective**:
  - Move from **IS**  to the top shelf (**IT**).
  - Proceed under the table (**FT**).
    
![Figure 3: Mobile Manipulator in Library Scene](<images/Library.PNG>)
### 3. Factory Scene
- **Setup**: A rack and two containers define the scene.
- **Objective**:
  - Move from the **IS** to the middle section of the rack (**IT**).
  - Proceed to the first container (**FT**).
    
![Figure 3: Factory Scene](<images/Factory Scene.png>)
---

## Evaluation Metrics

The performance of the motion planning pipelines is analyzed using the following metrics:

1. **C-Space Path Length**: 
   - The length of the path traversed in configuration space.
   
2. **Mean Velocity**:
   - The average speed of the robot's end-effector or a point of interest along the path.

3. **Maximum Acceleration**:
   - The highest rate of change of velocity along the planned path.

4. **Maximum Jerk**:
   - The maximum rate of change of acceleration.

5. **Full Pipeline Time**:
   - The total time from the start of motion planning to the completion of the path execution.

Each planner and planning scene is tested over **5 iterations**. The planned trajectories are visualized in **RViz**, while the robot's motion is observed in **Isaac Sim**.

---


## Results and Discussion

It is observed that **cuMotion** produces shorter paths compared to **OMPL** across all scenes. On average, **cuMotion** reduces the path length by 80 % when compared to **OMPL**, as shown inFigure below.

![Figure 4: Configuration Space](<images/C Space.PNG>)

The maximum jerk along the trajectory across all joints and scenes is shown in Figure below. The results indicate that the maximum jerk experienced with **cuMotion** is around 50 times lower than that of **OMPL**.

![Figure 5: Jerk Analysis](<images/Jerk.png>)

As shown in Figure below, the average time **cuMotion** takes to plan and produce trajectories, as well as execute robot motions, is **1.53 times faster** compared to **OMPL**.

![Figure 6: Time Analysis](<images/Full Time.PNG>)

**OMPL** exhibits the highest maximum acceleration values compared to **cuMotion**. As visualized in Figure below,, trajectories generated by **cuMotion** show an average **50% lower maximum acceleration** than those generated by **OMPL**.

![Figure 7: Acceleration Analysis](<images/Acceleration.PNG>)

Even with the smallest maximum acceleration, **cuMotion** achieves a mean velocity comparable to **OMPL**, as shown in Figure below,. The mean velocity produced by **cuMotion** is slightly higher by **0.01 rad/s** on average, and **1.35 times faster** compared to **OMPL**.

![Figure 8: Velocity Analysis](<images/Velocity.PNG>)



## Simulation
The simulation looks like this: https://youtu.be/_O5hBJp4P28

